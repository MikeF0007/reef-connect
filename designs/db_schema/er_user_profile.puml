@startuml
' ReefConnect ER Diagram (User & Profile)

hide circle
skinparam linetype ortho
skinparam shadowing false
skinparam entity {
  BackgroundColor #F8FAFC
  BorderColor #1E293B
  FontColor #0F172A
}

entity "user" as user {
  *id : uuid
  --
  *email : text
  *username : text
  *password_hash : text
  email_verified : boolean
  email_verified_at : timestamptz
  auth_providers : jsonb
  mfa_enabled : boolean
  mfa_secret : text
  *created_at : timestamptz
  *updated_at : timestamptz
}

entity "user_profile" as user_profile {
  *id : uuid
  *user_id : uuid
  --
  bio : text
  avatar_url : text
  avatar_storage_key : text
  first_name : text
  last_name : text
  location : text
  website_url : text
  birth_date : date
  certifications : jsonb
  *created_at : timestamptz
  *updated_at : timestamptz
}

entity "privacy_setting" as privacy_setting {
  *id : uuid
  *user_id : uuid
  --
  profile_visibility : text
  dive_logs_visibility : text
  media_visibility : text
  stats_visibility : text
  *created_at : timestamptz
  *updated_at : timestamptz
}

entity "user_certification" as user_certification {
  *id : uuid
  *user_id : uuid
  --
  *certification_name : text
  *issuer : text
  *issued_date : date
  expiry_date : date
  certification_number : text
  notes : text
  verified : boolean
  *created_at : timestamptz
}


' Relationships
user ||--|| user_profile : "1:1"
user ||--|| privacy_setting : "1:1"
user ||--o{ user_certification : "1:many"

@enduml
